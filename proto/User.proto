syntax = "proto3";

option csharp_namespace = "PBNS";
option java_package = "net.good321.proto";
option java_outer_classname = "UserMsg";
import "Common.proto";

// 登录类型 验证方式:0=直接输入账号密码(测试模式)
enum LoginType {
  USER_LOGIN_TYPE_TEST = 0; //测试模式
  USER_LOGIN_TYPE_WX_MINI_GAME = 1; //微信小游戏
}

// loginType==USER_LOGIN_TYPE_TEST 时的参数
message UserLoginTypeTest {
  string userName = 1; //账号,测试模式时用,3到10位字符
  string password = 2; // 密码,测试模式时用,3到10位字符
}

//loginType==USER_LOGIN_TYPE_WX_MINI_GAME 小游戏-时的参数
message UserLoginTypeWxMiniGame {
  string js_code = 1; //微信小游戏登录的code
}

// 协议对:账号登陆,cmd=USER_LOGIN
message C2SUserLogin {
  BaseClientInfo clientInfo = 1; //客户端信息
  LoginType loginType = 2; //验证方式

  UserLoginTypeTest userLoginTypeTest = 3;//对应的登录参数
  UserLoginTypeWxMiniGame wxMiniGame = 4; //微信小游戏\抖音小游戏\快手小游戏  loginType==USER_LOGIN_TYPE_MINI_GAME
}
message S2CUserLogin {
  LoginType loginType = 1; //验证方式,透传回去
  string sessionId = 2; //登录成功的令牌,后续所有http协议都需要携带(添加到http的headers里),具有一定的有效期
}

//玩家信息
message PlayerInfo {
  int64 uid = 1;  //角色id
  string showName = 2;  //昵称,应该是社交平台的昵称吧
  string showIconUrl = 3; //社交平台的个人图标---有些时候可能是第三方服务器的一个url
  string createTime = 4;//创建时间,格式:yyyy-MM-dd HH:mm:ss
  map<string, int64> rankScore = 5;//各排行榜积分,key=RankTypeEnum.name,value=积分
  int32 winPer = 6;//获取入圈率的万分比格式,0~10000,如50%返回5000,100%返回10000
  bool commentsSwitch = 7;//点评开关:true=开启
  map<int32, int32> comments = 8;//点评信息,key=评论定义Id,value=次数
}

// 协议对:获取玩家信息,cmd=USER_INFO
message C2SGetPlayerInfo {
}
message S2CGetPlayerInfo {
  PlayerInfo playerInfo = 1; //个人信息
}

// 协议对:修改玩家昵称等信息,cmd=USER_EDIT
message C2SUserEdit {
  int32 editType = 1;//修改类型,0=修改昵称,1=修改头像,2=修改电话号码,3=修改点评开关
  string StringValue = 2;  //根据类型发送对应参数
}
message S2CUserEdit {
  PlayerInfo playerInfo = 1;
}

message Notice {
  int32 type = 1; //公告类型, 0=大厅公告
  string title = 2; //标题
  string content = 3; //内容
}

// 协议对:获取公共列表,cmd=NOTICE_GET_LIST,无需登录
message C2SGetNotice {
}
message S2CGetNotice {
  repeated Notice noticeList = 1;//公告列表
}

// 协议对:点评别人,cmd=COMMENT
message C2SComment {
  int64 uid = 1; //被点评的玩家id
  int32 defineId = 2;//点评定义Id
}
message S2CComment {
  //必定成功,但是可能因为cd控制而被忽略
}